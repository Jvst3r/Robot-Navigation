# Проект автономной навигации робота
## Обзор проекта
Система компьютерного зрения для автономной навигации мобильного робота в реальном времени.\
Основные компоненты:
- Захват и обработка видео с IP-камеры
- Детекция объектов с помощью YOLOv8
- Построение карты препятствий
- Планирование пути алгоритмом
- Формирование управляющих команд для робота
## Требования
- Python 3.8+
- Зависимости: `pip install -r requirements.txt`
- Модель YOLOv8
- IP-камера
## Модули проекта
1. **frame_processor.py** - Обработка кадров
- *remove_fisheye()*: Коррекция дисторсии "рыбий глаз
- *detect_objects()*: Детекция объектов с помощью YOLOv8 и фильтрация NMS
- *detect_obstacles()*: Поиск препятствий через бинаризацию и контуры
- *get_robot_center()*: Определение центра робота по bounding box
- *create_obstacle_map()*: Построение карты препятствий с масштабированием
- *MyAStar*: Кастомная реализация алгоритма A* для навигации
- *find_path()*: Асинхронный поиск пути между точками\
2. **image_processor.py** - Обработка изображений
- *mouse_callback()*: Обработчик выбора точек пути мышью
- *process_image()*: Первичная обработка изображения (выбор точек)
- *secound_process_image()*: Последующая обработка с существующими целями
- *get_vector_sing()*: Определение направления вектора движения\
3. **movie.py** - Видео утилиты
- *get_contours()*: Поиск контуров препятствий с исключением области робота
- *hide_robot()*: Создание маски изображения с замаскированным роботом
4. **path_error.py** - Обработка ошибок
5. **realtime.py** - Реалтайм исполнение
- *send_command()*: Отправка команд роботу по TCP
- *set_speed()*: Установка скорости гусениц
- *kyda_napravlen_po_vectory()*: Преобразование вектора в текст направления
- *connect_to_robot()*: Установка соединения с роботом
- *do()*: Выполнение команды с контролем времени
- *sleep()*: Задержка выполнения\
*В каждом файле есть комментарии*
# Установка и запуск алгоритма
1. Установление зависимостей
```bash
pip install -r requirements.txt
```
2. Настройте параметры подключения в `realtime.py`:
```python
host = "000.000.0.0"  # IP вашего робота
port = 9999            # Его порт управления
rtsp_url = "rtsp://login:password@ip:port/stream"  # RTSP камеры
```
3. Запустите алгоритм:
```bash
python realtime.py
```
4. В реалтайме:
- Кликните левой кнопкой мыши для выбора стартовой позиции
- Кликните еще раз для выбора целевой позиции
- Закройте это окно
- Система автоматически построит путь и начнет движение
## Архитектура системы
![Архитектура](https://github.com/Jvst3r/Robot-Navigation/blob/main/Architecture.png)
## Ключевые параметры (зависит от вашего робота)
```
# realtime.py
ROBOT_RADIUS = 10          # Радиус робота в пикселях
STEP_COUNT = 1              # Шагов между коррекциями
CORRECT_TIME = 160          # Время коррекции траектории (мс)
DELTA_ANGLE = 0             # Корректировка угла поворота

# Параметры движения
time_to_90 = 600            # Время поворота на 90° (мс)
time_to_180 = 900           # Время поворота на 180° (мс)
time_to_1step_forward = 600 # Время движения на 1 шаг (мс)
```
